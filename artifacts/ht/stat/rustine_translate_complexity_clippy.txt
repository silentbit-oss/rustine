warning: this loop could be written as a `while let` loop
